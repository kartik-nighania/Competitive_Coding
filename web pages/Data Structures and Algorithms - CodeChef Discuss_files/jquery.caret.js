(function(e,t,n,r){e.fn.caret=function(a,s){var i,l,o=this[0],c=e.browser.msie;if(typeof a==="object"&&typeof a.start==="number"&&typeof a.end==="number"){i=a.start;l=a.end}else if(typeof a==="number"&&typeof s==="number"){i=a;l=s}else if(typeof a==="string")if((i=o.value.indexOf(a))>-1)l=i+a[t];else i=null;else if(Object.prototype.toString.call(a)==="[object RegExp]"){a=a.exec(o.value);if(a!=null){i=a.index;l=i+a[0][t]}}if(typeof i!="undefined"){if(c){c=this[0].createTextRange();c.collapse(true);c.moveStart("character",i);c.moveEnd("character",l-i);c.select()}else{this[0].selectionStart=i;this[0].selectionEnd=l}this[0].focus();return this}else{if(c){l=document.selection;if(this[0].tagName.toLowerCase()!="textarea"){c=this.val();i=l[n]()[r]();i.moveEnd("character",c[t]);var u=i.text==""?c[t]:c.lastIndexOf(i.text);i=l[n]()[r]();i.moveStart("character",-c[t]);var f=i.text[t]}else{i=l[n]();l=i[r]();l.moveToElementText(this[0]);l.setEndPoint("EndToEnd",i);u=l.text[t]-i.text[t];f=u+i.text[t]}}else{u=o.selectionStart;f=o.selectionEnd}i=o.value.substring(u,f);return{start:u,end:f,text:i,replace:function(e){return o.value.substring(0,u)+e+o.value.substring(f,o.value[t])}}}}})(jQuery,"length","createRange","duplicate");